<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.1.0/css/all.css"
      integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt"
      crossorigin="anonymous"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Roboto|Roboto+Condensed|Roboto+Slab"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
    <title>Crear Activo</title>
  </head>

  <body background="img/8.jpg">
    <div id="slideout-menu">
      <ul>
        <li>
          <a href="index.html">Inicio</a>
        </li>
        <li>
          <a href="activos.html">Crear Acivo</a>
        </li>
        <li>
          <a href="prestar.html">Prestar</a>
        </li>
        <li>
          <a href="Listado.html">Listado De Activos</a>
        </li>
        <li>
          <a href="historialprestamo.html">Historial De Prestamos</a>
        </li>
        <li>
          <a href="descargar.html">Descargar Activos</a>
        </li>
        <li>
          <a href="descipciones.html">Descripcion De Movimiento MPU6050</a>
        </li>
      </ul>
    </div>

    <nav>
      <div id="logo-img">
        <a href="#">
          <img src="img/logo.png" alt="GTCoding Logo" />
        </a>
      </div>
      <div id="menu-icon">
        <i class="fas fa-bars"></i>
      </div>
      <ul>
        <li>
          <a href="index.html">Inicio</a>
        </li>
        <li>
          <a class="active" href="activos.html">Crear Activo</a>
        </li>
        <li>
          <a href="prestar.html">Prestar</a>
        </li>
        <li>
          <a href="Listado.html">Listado De Activos</a>
        </li>
        <li>
          <a href="historialprestamo.html">Historial De Prestamos</a>
        </li>
        <li>
          <a href="descargar.html">Descargar Activos</a>
        </li>
        <li>
          <a href="descipciones.html">Descripcion De Movimiento MPU6050</a>
        </li>
      </ul>
    </nav>

    <div id="searchbox">
      <input type="text" placeholder="Search Here" />
    </div>

    <main>
      <h2 class="page-heading">
        Inicia Creando Tus Activos para la Base de Datos
      </h2>

      <center>
        <div class="container">
          <div class="row">
            <form id="form">
              <div class="form-group">
                <label for="exampleInputEmail1" style="color: #0413e9"
                  >Codigo Activo</label
                >
                <br />
                <br />
                <input
                  type="text"
                  class="form-control"
                  id="task"
                  aria-describedby="emailHelp"
                />
              </div>
              <div class="form-group">
                <br />
                <label for="exampleInputEmail1" style="color: #0413e9"
                  >Grupo</label
                >
                <br />
                <br />
                <input
                  type="text"
                  class="form-control"
                  id="task1"
                  aria-describedby="emailHelp"
                />
              </div>
              <div class="form-group">
                <br />
                <label for="exampleInputEmail1" style="color: #0413e9"
                  >Fecha de Compra</label
                >
                <br />
                <br />
                <input
                  type="date"
                  class="form-control"
                  id="task2"
                  aria-describedby="emailHelp"
                />
              </div>
              <div class="form-group">
                <br />
                <label for="exampleInputEmail1" style="color: #0413e9"
                  >Nombre Activo</label
                >
                <br />
                <br />
                <input type="text" class="form-control" id="task3" />
              </div>
              <div class="form-group">
                <br />
                <label for="exampleInputEmail1" style="color: #0413e9"
                  >Modelo</label
                >
                <br />
                <br />
                <input
                  type="text"
                  class="form-control"
                  id="task4"
                  aria-describedby="emailHelp"
                />
              </div>
              <div class="form-group">
                <br />
                <label for="exampleInputEmail1" style="color: #0413e9"
                  >Marca</label
                >
                <br />
                <br />
                <input
                  type="text"
                  class="form-control"
                  id="task5"
                  aria-describedby="emailHelp"
                />
              </div>
              <div class="form-group">
                <br />
                <label for="exampleInputEmail1" style="color: #0413e9"
                  >Serie Del Equipo</label
                >
                <br />
                <br />
                <input
                  type="text"
                  class="form-control"
                  id="task6"
                  aria-describedby="emailHelp"
                />
              </div>
              <div class="form-group">
                <br />
                <label for="exampleInputEmail1" style="color: #0413e9"
                  >Color</label
                >
                <br />
                <br />
                <input
                  type="text"
                  class="form-control"
                  id="task7"
                  aria-describedby="emailHelp"
                />
              </div>
              <div class="form-group">
                <br />
                <label for="exampleInputEmail1" style="color: #0413e9"
                  >Responsable</label
                >
                <br />
                <br />
                <input
                  type="text"
                  class="form-control"
                  id="task8"
                  aria-describedby="emailHelp"
                />
              </div>
              <br />
              <br />
              <center>
                <button
                  type="submit"
                  class="btn btn-primary"
                  id="button1"
                  style="
                    text-decoration: none;
                    padding: 10px;
                    font-weight: 600;
                    font-size: 20px;
                    color: #ffffff;
                    background-color: #1883ba;
                    border-radius: 6px;
                    border: 2px solid #0016b0;
                  "
                >
                  Registrar Activo
                </button>
              </center>
            </form>
          </div>
          <br />
          <div id="tag"></div>
          <br />
          <center><div class="col-md-8" id="cardSection"></div></center>
        </div>
      </center>
    </main>

    <script src="main.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.21.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.21.0/firebase-database.js"></script>
    <script>
      // Your web app's Firebase configuration
      // For Firebase JS SDK v7.20.0 and later, measurementId is optional
      var firebaseConfig = {
        apiKey: "AIzaSyBHN1iv58dJJGSO7w4U2PmHIzpag9vDP4w",
        authDomain: "iot-prueba-548fa.firebaseapp.com",
        databaseURL: "https://iot-prueba-548fa.firebaseio.com",
        projectId: "iot-prueba-548fa",
        storageBucket: "iot-prueba-548fa.appspot.com",
        messagingSenderId: "1008402735008",
        appId: "1:1008402735008:web:f477539521ee12bd698ec5",
        measurementId: "G-R9EM8QPEEJ",
      };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);

      var d = new Date();
      var t = d.getTime();
      var counter = t;

      document.getElementById("form").addEventListener("submit", (e) => {
        var tag = document.getElementById("task").value;
        var grupo = document.getElementById("task1").value;
        var fechacompre = document.getElementById("task2").value;
        var nombre = document.getElementById("task3").value;
        var modelo = document.getElementById("task4").value;
        var marca = document.getElementById("task5").value;
        var serie = document.getElementById("task6").value;
        var color = document.getElementById("task7").value;
        var responsable = document.getElementById("task8").value;
        e.preventDefault();
        createTask(
          tag,
          grupo,
          fechacompre,
          nombre,
          modelo,
          marca,
          serie,
          color,
          responsable
        );
        form.reset();
      });

      function createTask(
        tasktag,
        taskgrupo,
        taskfechacompra,
        tasknombre,
        taskmodelo,
        taskmarca,
        taskserie,
        taskcolor,
        taskresponsable
      ) {
        counter += 1;
        console.log(counter);
        var task = {
          tag: tasktag,
          grupo: taskgrupo,
          fechacompra: taskfechacompra,
          nombre: tasknombre,
          modelo: taskmodelo,
          marca: taskmarca,
          serie: taskserie,
          color: taskcolor,
          responsable: taskresponsable,
          id: counter,
        };
        let db = firebase.database().ref("Activos/" + counter);
        db.set(task);
        document.getElementById("cardSection").innerHTML = "";
      }
      function readTask() {
        var task = firebase.database().ref("task/");
        task.on("child_added", function (data) {
          var taskValue = data.val();
          console.log(taskValue);
          document.getElementById("cardSection").innerHTML += `
          <div class="card mb-3">
              <div class="card-body">
                  <h5 class="card-title"> ${taskValue.task}</h5>
                  <p class="card-text"> ${taskValue.description}</p>
              </div>
              </div>
          `;
        });
      }
    </script>
  </body>
</html>
